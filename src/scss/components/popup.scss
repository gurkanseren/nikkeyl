@use "sass:math" as *;
@use "@scss/abstracts" as *;
@use "@scss/utilities/placeholders" as *;

.popup {
	position: fixed;
	inset: 0;
	padding-block: to-rem(30);
	padding-inline: to-rem($container-padding-inline);
	opacity: 0;
	transition: opacity
		var(--default-transition-duration, #{$default-transition-duration});
	pointer-events: none;

	&__wrapper {
		justify-content: center;
		min-block-size: 100%;
	}

	&__content {
		position: relative;
		inline-size: max(25rem);
		padding-block: to-rem(50);
		padding-inline: to-rem(20);
		background-color: var(--color-pale, #{$color-pale});
		opacity: 0;
		scale: 0;
		transition:
			opacity var(--default-transition-duration, #{$default-transition-duration}),
			scale var(--default-transition-duration, #{$default-transition-duration});

		.lock & {
			opacity: 1;
		}
	}

	&__icon {
		$size: 150;

		block-size: to-rem($size);
		inline-size: to-rem($size);
		animation: drag 1s infinite;

		svg {
			fill: none;
			stroke: var(--color-accent, #{$color-accent});

			@extend %box-shadow-accent;
		}

		@keyframes drag {
			0% {
				rotate: 3deg;
			}

			50% {
				rotate: -3deg;
			}

			100% {
				rotate: 3deg;
			}
		}
	}

	&__text {
		max-inline-size: to-rem(210);
		text-align: center;

		span {
			@extend %color-accent;
		}
	}

	&__close {
		position: absolute;
		inset-block-start: to-rem(20);
		inset-inline-end: to-rem(15);
		display: block;
		block-size: to-rem(18);
		inline-size: to-rem(30);
		cursor: pointer;

		&::before,
		&::after {
			inset-inline-end: 0;
			border-radius: to-rem(2);
			block-size: to-rem(2);
			inline-size: 100%;
			background-color: var(--color-secondary, #{$color-secondary});

			@extend %pseudo;
		}

		&::before {
			inset-block-start: calc(50% - to-rem(1));
			rotate: -45deg;
		}

		&::after {
			inset-block-end: calc(50% - to-rem(1));
			rotate: 45deg;
		}
	}

	&--show {
		z-index: var(--z-index-4, #{$z-index-4});
		overflow: auto;
		opacity: 1;
		pointer-events: auto;
		overscroll-behavior-inline: none;

		.popup__content {
			opacity: 1;
			scale: 1;
		}
	}
}
